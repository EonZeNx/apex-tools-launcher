<?xml version="1.0" encoding="utf-8"?>
<!-- Generated by ATL v0.12.0 -->
<atl.script version="1">
	<var name="unpack_directory" type="string" value="C:\Users\Main\Documents\Central Hub 2TB\Games\Avalanche\Just Cause 3"/>
	<var name="mod_directory" type="string" value="D:\Games\Avalanche\_Projects\apex-tools-launcher\Tests\Script\Stats"/>
	<var name="vehicle_extract_directory" type="string" value="$mod_directory\vehicles_extracted"/>
	<var name="ed_en" type="string" value="editor\entities"/>
	<query name="vehicle_directories" type="directories">
		<target>$unpack_directory\$ed_en\jc_vehicles\01_land</target>
		<target>$unpack_directory\$ed_en\jc_vehicles\02_air</target>
		<target>$unpack_directory\$ed_en\jc_vehicles\03_sea</target>
	</query>
	<for name="i" each="$vehicle_directories" parallel="0">
		<break/>
		<var name="vehicle_directory" type="string" value="$i_vehicle_directories"/>
		<string name="vehicle_name" target="$vehicle_directory">
			<split take="-1"/>
		</string>
		<print color="cyan" value="Starting '$vehicle_name'"/>
		<query name="vehicle_ee" type="files">
			<search_pattern>*.ee</search_pattern>
			<target>$vehicle_directory</target>
		</query>
		<for name="j" each="$vehicle_ee">
			<var name="vehicle_variant_filepath" type="string" value="$j_vehicle_ee"/>
			<string name="vehicle_variant_name" target="$vehicle_variant_filepath">
				<split take="-1"/>
				<split symbol="." take="0"/>
			</string>
			<print color="green" value="Found '$vehicle_variant_name'"/>
			<copy from="$vehicle_variant_filepath" to="$mod_directory\$vehicle_variant_name.ee"/>
			<process target="$mod_directory\$vehicle_variant_name.ee" out_directory="$mod_directory"/>
			<delete target="$mod_directory\$vehicle_variant_name.ee"/>
			<query name="extracted_vehicle_paths" type="directories" recursive="1">
				<target>$mod_directory\$vehicle_variant_name\$ed_en\jc_vehicles\01_land\$vehicle_name</target>
				<target>$mod_directory\$vehicle_variant_name\$ed_en\jc_vehicles\02_air\$vehicle_name</target>
				<target>$mod_directory\$vehicle_variant_name\$ed_en\jc_vehicles\03_sea\$vehicle_name</target>
			</query>
			<query name="extracted_vehicle_paths" type="files" recursive="1">
				<search_pattern>*.epe</search_pattern>
				<target>$mod_directory\$vehicle_variant_name\$ed_en\jc_vehicles\01_land\$vehicle_name</target>
				<target>$mod_directory\$vehicle_variant_name\$ed_en\jc_vehicles\02_air\$vehicle_name</target>
				<target>$mod_directory\$vehicle_variant_name\$ed_en\jc_vehicles\03_sea\$vehicle_name</target>
			</query>
			<for name="k" each="$extracted_vehicle_paths">
				<var name="vehicle_directory" type="string" value="$k_extracted_vehicle_paths"/>
				<string name="vehicle_name" target="$vehicle_directory">
					<split take="-1"/>
				</string>
				<move from="$vehicle_directory" to="$vehicle_extract_directory\$vehicle_name"/>
			</for>
			<delete target="$mod_directory\$vehicle_variant_name"/>
		</for>
	</for>
	<query name="extractable_filepaths" type="files" recursive="1">
		<search_pattern>*.epe</search_pattern>
		<search_pattern>*.vmodc</search_pattern>
		<target>$vehicle_extract_directory</target>
	</query>
	<for name="j" each="$extractable_filepaths" parallel="1">
		<var name="extractable_filepath" type="string" value="$j_extractable_filepaths"/>
		<string name="extractable_file_directory" target="$extractable_filepath">
			<split take="-1" invert="1"/>
		</string>
		<print color="cyan" value="Processing '$extractable_filepath'"/>
		<process target="$extractable_filepath"/>
		<print color="cyan" value="Deleting '$extractable_filepath'"/>
		<delete target="$extractable_filepath"/>
	</for>
</atl.script>