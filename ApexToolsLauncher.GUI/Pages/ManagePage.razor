@page "/"
@page "/manage"
@using ApexToolsLauncher.Core.Libraries
@inherits MudComponentBase

<div class="mt-1">
  <GameCardsComponent GameChanged="@OnGameChanged"/>

  <MudGrid Class="mt-4" Spacing="3">
    <MudItem xs="12" Class="pb-0">
      <GameActionsComponent GameId="@GameId" ProfileChanged="@OnProfileChanged"/>
    </MudItem>
    
    <MudItem xs="12">
      <GameTabsView GameId="@GameId" ProfileId="@ProfileId" PanelStyle="height: 20rem"/>
    </MudItem>
    
    <MudItem xs="4" Style="height: 20rem">
      <ModListCard
        GameId="@GameId"
        ModId="@ModId"
        ModChanged="@OnModChanged"
        Style="width: 100%; height: 100%"
      />
    </MudItem>

    <MudItem xs="8" Style="height: 20rem">
      @if (!ConstantsLibrary.IsStringInvalid(ModId))
      {
        <ModCard
          GameId="@GameId"
          ProfileId="@ProfileId"
          ModId="@ModId"
          Style="width: 100%; height: 100%"
        />
      }
      else
      {
        <MudPaper Width="100%" Height="100%" Class="d-flex align-center justify-center">
          <MudText
            Typo="Typo.body1"
            Style="font-style: italic"
          >No mod selected</MudText>
        </MudPaper>
      }
    </MudItem>

    <MudGrid Class="mt-1">
      @foreach (var (launchId, launchConfig) in GameConfig.LaunchOptions)
      {
        <MudItem xs="12" md="6">
          <LaunchArgumentCard
            GameId="@GameId"
            ProfileId="@ProfileId"
            LaunchId="@launchId"
            LaunchOptionConfig="@launchConfig"
          />
        </MudItem>
      }
    </MudGrid>
  </MudGrid>
</div>
